<!DOCTYPE html>
<html>
<head>
<title>ETES - Online Shopping Cart</title>
<meta charset="utf-8" />
<link rel="stylesheet" href="css/style.css" media="screen" type="text/css" />
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
<script type="text/javascript" src="js/jquery.shop.js"></script>
</head>
<!-- Jameson Edit Start Referenced from userdashboard.html-->
<script>
    function getData(){
        var id = getParameterByName('ticket_id');
        var obj, dbParam, xmlhttp, myObj, x, txt ="";
        var det, quantity, price, address =""; 
        obj = {"table":"tickets","limit":20};
        dbParam = JSON.stringify(obj);
        xmlhttp = new XMLHttpRequest();
        xmlhttp.onreadystatechange = function() {
            // If complete and response recieved = 4, 200 = is correct
            if (this.readyState == 4 && this.status == 200){
                myObj = JSON.parse(this.responseText);
                txt += "<p>"
                det += "<p>"
                price += "<p>"
                address += "<p>"
                // edit for loop to return varied information
                // for (x in myObj) {
                //     txt += " <br>Ticket Name: "+myObj[x].ticket_name+" <br>Ticket Detail: "+myObj[x].ticket_detail+" <br>Ticket Quantity: "+myObj[x].ticket_quantity+" <br>Ticket Price: "+myObj[x].ticket_price+ " <br>Ticket Address: "+ myObj[x].ticket_pickup_address + "<br>";
                // }
                // for loop that will hold document values
                for (x in myObj) {
                	if (x == 1){
                		break;
                	}
                	txt = myObj[x].ticket_name;
                	det = myObj[x].ticket_detail;
                	price = myObj[x].ticket_price;
                	address = myObj[x].ticket_pickup_address; 
                }
                txt += "</p>"
                document.getElementById("ticket_name").innerHTML = txt;
                det += "</p>"
                document.getElementById("ticket_dets").innerHTML = det; 
                price += "</p>"
                document.getElementById("ticket_price").innerHTML = price;
                address += "</p>"
                document.getElementById("ticket_address").innerHTML = address;
                // det += "<p>"
                // for (x in myObj) {
                // 	if (x == 1){
                // 		break;
                // 	}
                // 	det += "<br>" + myObj[x].ticket_detail;
                // 	// quantity += "<br>" + myObj[x].ticket_quantity;
                // 	// price += "<br>" + myObj[x].ticket_price;
                // 	// address += "<br>" + myObj[x].ticket_pickup_address;
                // }
                // det += "</p>"
                // document.getElementById("ticket_dets").innerHTML = det;
                // det += "<p>"
                // for (x in myObj) {
                // 	if (x == 1){
                // 		break;
                // 	}
                	// quantity += "<br>" + myObj[x].ticket_quantity;
                	// price += "<br>" + myObj[x].ticket_price;
                	// address += "<br>" + myObj[x].ticket_pickup_address;
                // }
                // quantity += "</p>"
                // document.getElementById("ticket_quan").innerHTML = quantity;
                // price += "</p>"
                // document.getElementById("ticket_price").innerHTML = price;
                // address += "</p>"
                // document.getElementById("ticket_address").innerHTML = address;
            }
        }
        xmlhttp.open("POST", "../php/TicketListing.php?ticket_list=" + id, true);
        xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
        xmlhttp.send("user_id=" + id);
    }
    function getParameterByName(name, url) {
        if (!url) {
          url = window.location.href;
        }
        name = name.replace(/[\[\]]/g, "\\$&");
        var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
            results = regex.exec(url);
        if (!results) return null;
        if (!results[2]) return '';
        return decodeURIComponent(results[2].replace(/\+/g, " "));
    }
</script>
<!-- Jameson Edit End -->
<body onload="getData()">
<!-- <div id="ticketlisting">TICKETLISTINGS</div> -->
<div id="site">
	<header id="masthead">
		<h1>ETES<span class="tagline">Online Ticket Marketplace</h1>
	</header>
	<div id="content">
		<div id="products">
			<ul>
				<li>
					<div class="product-description" data-name="Warrior Seasonal Ticket" data-price="50">
						<!-- <h4 class="product-name">Warrior Ticket</h4> -->
						<h4 id="ticket_name" class="product-name">Warrior Tickets</h4>
						<h5 id="ticket_dets"> Ticket Details</h5>
						<h6 id="ticket_address"> Ticket Address</h6>
						<!-- <p class="product-price">&dollar;50</p> -->
						<!-- not really working for p-->
						<p id="ticket_price" class="product-price">&dollar;50</p>
						<form class="add-to-cart" action="cart.html" method="post">
							<div>
								<label for="qty-1">Quantity</label>
								<input type="text" name="qty-1" id="qty-1" class="qty" value="1" />
							</div>
							<p><input type="submit" value="Add to cart" class="btn" /></p>
						</form>
					</div>
				</li>
				<li>
					<div class="product-description" data-name="Giant Ticket" data-price="80">
						<h3 class="product-name">Giant Ticket</h3>
						<p class="product-price">&dollar; 80</p>
						<form class="add-to-cart" action="cart.html" method="post">
							<div>
								<label for="qty-2">Quantity</label>
								<input type="text" name="qty-2" id="qty-2" class="qty" value="1" />
							</div>
							<p><input type="submit" value="Add to cart" class="btn" /></p>
						</form>
					</div>
				</li>

				<li>
					<div class="product-description" data-name="disney" data-price="25">
						<h3 class="product-name">Disney on Ice</h3>
						<p class="product-price">&dollar; 25</p>
						<form class="add-to-cart" action="cart.html" method="post">
							<div>
								<label for="qty-3">Quantity</label>
								<input type="text" name="qty-3" id="qty-3" class="qty" value="1" />
							</div>
							<p><input type="submit" value="Add to cart" class="btn" /></p>
						</form>
					</div>
				</li>

				<li>
				<br>
					<div class="product-description" data-name="" data-price="">
						<h3 class="product-name"> ticket </h3>
						<p class="product-price">&dollar; 50</p>
						<form class="add-to-cart" action="cart.html" method="post">
							<div>
								<label for="qty-3">Quantity</label>
								<input type="text" name="qty-3" id="qty-3" class="qty" value="1" />
							</div>
							<p><input type="submit" value="Add to cart" class="btn" /></p>
						</form>
					</div>
  			</li>
				<li>
				<br>
					<div class="product-description" data-name="" data-price="">
						<h3 class="product-name"> ticket </h3>
						<p class="product-price">&dollar; 50</p>
						<form class="add-to-cart" action="cart.html" method="post">
							<div>
								<label for="qty-3">Quantity</label>
								<input type="text" name="qty-3" id="qty-3" class="qty" value="1" />
							</div>
							<p><input type="submit" value="Add to cart" class="btn" /></p>
						</form>
					</div>
  			</li>
				<li>
				<br>
					<div class="product-description" data-name="" data-price="">
						<h3 class="product-name"> ticket </h3>
						<p class="product-price">&dollar; 50</p>
						<form class="add-to-cart" action="cart.html" method="post">
							<div>
								<label for="qty-3">Quantity</label>
								<input type="text" name="qty-3" id="qty-3" class="qty" value="1" />
							</div>
							<p><input type="submit" value="Add to cart" class="btn" /></p>
						</form>
					</div>
  			</li>
				<li>
				 <br>
					<div class="product-description" data-name="" data-price="">
						<h3 class="product-name"> ticket </h3>
						<p class="product-price">&dollar; 50</p>
						<form class="add-to-cart" action="cart.html" method="post">
							<div>
								<label for="qty-3">Quantity</label>
								<input type="text" name="qty-3" id="qty-3" class="qty" value="1" />
							</div>
							<p><input type="submit" value="Add to cart" class="btn" /></p>
						</form>
					</div>
  			</li>
				<li>
				 <br>
					<div class="product-description" data-name="" data-price="">
						<h3 class="product-name"> ticket </h3>
						<p class="product-price">&dollar; 50</p>
						<form class="add-to-cart" action="cart.html" method="post">
							<div>
								<label for="qty-3">Quantity</label>
								<input type="text" name="qty-3" id="qty-3" class="qty" value="1" />
							</div>
							<p><input type="submit" value="Add to cart" class="btn" /></p>
						</form>
					</div>
  			</li>
				<li>
				 <br>
					<div class="product-description" data-name="" data-price="">
						<h3 class="product-name"> ticket </h3>
						<!--change price here-->
						<p class="product-price">&dollar; 50</p>
						<form class="add-to-cart" action="cart.html" method="post">
							<div>
								<label for="qty-3">Quantity</label>
								<input type="text" name="qty-3" id="qty-3" class="qty" value="1" />
							</div>
							<p><input type="submit" value="Add to cart" class="btn" /></p>
						</form>
					</div>
  			</li>

			</ul>
		</div>
	</div>

</div>
</body>
</html>
