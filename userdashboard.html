<!DOCTYPE html>
<html >
<head>
<meta charset="UTF-8">
<title>ETES - Dashboard</title>


      <!-- Bootstrap -->
      <link href="css/bootstrap.min.css" rel="stylesheet">
      <link href='https://fonts.googleapis.com/css?family=Roboto:400,700' rel='stylesheet' type='text/css'>

      <link href="css/style.css" rel="stylesheet">
<!--don't delete the following line-->
<script language="javascript" type="text/javascript" src="js/jquery.min.js"></script>

</head>
<script>
    function getData(){
        var id = getParameterByName('user_id');
        /*var obj;
        $.ajax({
            url: 'php/UserDashboard.php',
            type: 'POST',
            data: {user_id: id},
            dataType: 'json',
            success: function(result){
                $('#output').html(JSON.stringify(result));
            }
        });*/
        var obj, dbParam, xmlhttp, myObj, x, txt = "";
        obj = { "table":"customers", "limit":20 };
        dbParam = JSON.stringify(obj);
        xmlhttp = new XMLHttpRequest();
        xmlhttp.onreadystatechange = function() {
            if (this.readyState == 4 && this.status == 200) {
                myObj = JSON.parse(this.responseText);
                txt += "<p>"
                for (x in myObj) {
                    txt += "User ID: "+myObj[x].user_id+" <br>Email: "+myObj[x].user_email+" <br>Username: "+myObj[x].user_name+" <br>Phone: "+myObj[x].user_phone+" <br>Address: "+myObj[x].user_address+" <br>Credit Card Number: "+myObj[x].user_creditcard +" <br>Account Date Created: "+myObj[x].user_create_stmp;
                }
                txt += "</p>"
                document.getElementById("output").innerHTML = txt;
            }
        };
        xmlhttp.open("POST", "php/UserDashboard.php?user_id=" + id, true);
        xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
        xmlhttp.send("user_id=" + id);
        
        var tix = getParameterByName('ticket_postedby');
        var obj, dbParam, xmlhttp, myObj, x, foo = "";
        obj = { "table":"tickets", "limit":20 };
        dbParam = JSON.stringify(obj);
        xmlhttp = new XMLHttpRequest();
        xmlhttp.onreadystatechange = function() {
            if (this.readyState == 4 && this.status == 200) {
                myObj = JSON.parse(this.responseText);
                foo += "<p>"
                for (x in myObj) {
                    foo += "Ticket Name: "+myObj[x].ticket_name+" <br>Details: "+myObj[x].ticket_detail+" <br>Ticket Quantity: "+myObj[x].ticket_quantity+" <br>Address: "+myObj[x].ticket_pickup_address+" <br>Ticket Price: $"+myObj[x].ticket_price +" <br>Posted on: "+myObj[x].ticket_stmp+"<br><br>";
                }
                foo += "</p>"
                document.getElementById("tickets").innerHTML = foo;
            }
        };
        xmlhttp.open("POST", "php/tickets.php?ticket_postedby=" + id, true);
        xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
        xmlhttp.send("user_id=" + id);
    }
    function getParameterByName(name, url) {
        if (!url) {
          url = window.location.href;
        }
        name = name.replace(/[\[\]]/g, "\\$&");
        var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
            results = regex.exec(url);
        if (!results) return null;
        if (!results[2]) return '';
        return decodeURIComponent(results[2].replace(/\+/g, " "));
    }
    function gotosell(){
        window.location = 'sell_tickets.html?user_id=' + getParameterByName('user_id');
    }
</script>
<body onload="getData()">
      <div id="mySidenav" class="sidenav">
        <a href="index.html" id="Home">Home</a>
        <a href="sell_tickets.html" id="findEvents">Sell Tickets</a>
        <a href="myTickets.html" id="myTickets">My Tickets</a>
        <a href="contact.php" id="Contact">Contact</a>
      </div>
    
    
      <div class="text-center">
        <div class="container" id="buy">
          <div class="row">
            <div class="col-md-12">

    <h1>User Dashboard</h1>
    <div id="output"></div>
    <button>Edit Profile</button><button onclick="gotosell()">Sell Tickets</button></p>
<!--<button class="reveal" href="sell_tickets.html?user_id=" target="page">Sell Ticket</button></p>
    <div class="page"></div> -->
    <h2>My Tickets</h2>
              <div id="tickets">You don't have any tickets. Why not try listing some?</div>
              
          </div>
    </div>
    
</body>
    
</html>
<!--<script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){

    $('.reveal').on('click', function(e){
        e.preventDefault();
        var link = $(this).attr('href');
        $('.page').load(link);
    });

});
</script>-->